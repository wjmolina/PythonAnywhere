<!DOCTYPE html>
<html>

<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata">
  <style>
    body {
      background-color: black;
      margin: 30px;
      text-align: center;
      font-family: 'Inconsolata';
    }

    h2,
    h3 {
      color: white;
    }

    p {
      color: #555;
    }

    u {
      border-bottom: 2px dotted #666;
      text-decoration: none;
    }

    img {
      margin: 30px 0 30px 0;
      height: 20%;
      width: 20%;
    }

    .btn {
      width: 50px;
    }
  </style>
</head>

<body>
  <h2>Wallpaper Hits: {{ items|map(attribute='wallpaper')|map('length')|sum }} (Last 4 Days)</h2>
  <p><i>hi</i></p>
  {% for item in items %}
  <h3>{{ item['name'] }}: {{ item['wallpaper']|length }}</h3>
  <table class="table table-striped table-dark table-hover table-sm">
    <tr>
      <th>IP</th>
      <th>Hit Count</th>
      <th>When?</th>
      <th>Country</th>
      <th>Region</th>
      <th>City</th>
      <th>ISP</th>
      <th>Notes</th>
    </tr>
    {% for datum in item['wallpaper'] %}
    <tr style="{{ 'background-color: darkred' if datum.ip[0] == 'E'  }}">
      <td>{{ datum.ip }}</td>
      <td>{{ datum.count }}</td>
      <td title="{{ datum.created_on }}">
        <u style="cursor:pointer">{{ arrow.get(datum.created_on).humanize() }}</u>
      </td>
      <td>{{ datum.country }}</td>
      <td>{{ datum.region }}</td>
      <td>{{ datum.city }}</td>
      <td>{{ datum.isp }}</td>
      <td><a class="btn {{ 'btn-secondary' if datum.notes_count < 1 else 'btn-warning' }} btn-sm" href="../wallpaper/notes/{{ datum.ip }}" role="button">{{ datum.notes_count }}</a></td>
    </tr>
    {% endfor %}
  </table>
  {% endfor %}
</body>

</html>